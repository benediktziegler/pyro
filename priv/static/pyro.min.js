var Pyro=(()=>{var h=Object.defineProperty;var E=Object.getOwnPropertyDescriptor;var L=Object.getOwnPropertyNames;var S=Object.prototype.hasOwnProperty;var k=(e,s)=>{for(var n in s)h(e,n,{get:s[n],enumerable:!0})},b=(e,s,n,l)=>{if(s&&typeof s=="object"||typeof s=="function")for(let o of L(s))!S.call(e,o)&&o!==n&&h(e,o,{get:()=>s[o],enumerable:!(l=E(s,o))||l.enumerable});return e};var M=e=>b(h({},"__esModule",{value:!0}),e);var f=(e,s,n)=>new Promise((l,o)=>{var d=i=>{try{a(n.next(i))}catch(r){o(r)}},t=i=>{try{a(n.throw(i))}catch(r){o(r)}},a=i=>i.done?l(i.value):Promise.resolve(i.value).then(d,t);a((n=n.apply(e,s)).next())});var A={};k(A,{booleanDataset:()=>T,focusAndSelect:()=>y,getTimezone:()=>w,hooks:()=>I,selectValue:()=>c,sendTimezoneToServer:()=>x,throttle:()=>g});localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");window.addEventListener("pyro:theme-dark",e=>{localStorage.theme="dark",document.documentElement.classList.add("dark")});window.addEventListener("pyro:theme-light",e=>{localStorage.theme="light",document.documentElement.classList.remove("dark")});window.addEventListener("pyro:theme-system",e=>{localStorage.removeItem("theme"),window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),document.documentElement.classList.add("dark")});window.addEventListener("pyro:clear",e=>{var s;((s=e==null?void 0:e.target)==null?void 0:s.value)!=""&&(e.target.value="")});function w(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function x(){return f(this,null,function*(){let e=w(),s=document.querySelector("meta[name='csrf-token']").getAttribute("content");typeof window.localStorage!="undefined"&&(!localStorage.timezone||localStorage.timezone!=e)&&(yield fetch("/session/set-timezone",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json","x-csrf-token":s},referrerPolicy:"no-referrer",body:JSON.stringify({timezone:e})})).status===200&&(localStorage.timezone=e)})}var I={PyroFlashComponent:{mounted(){var e;this.oldMessageHTML=document.querySelector(`#${this.el.id}-message`).innerHTML,((e=this.el.dataset)==null?void 0:e.autoshow)!==void 0&&window.liveSocket.execJS(this.el,this.el.getAttribute("data-show-exec-js")),v(this)},updated(){newMessageHTML=document.querySelector(`#${this.el.id}-message`).innerHTML,newMessageHTML!==this.oldMessageHTML?(this.oldEl=this.el,this.oldMessageHTML=newMessageHTML,v(this)):el.value=this.countdown},destroyed(){clearInterval(this.ttlInterval)}},PyroNudgeIntoView:{mounted(){p(this.el)},updated(){p(this.el)}},PyroAutocompleteComponent:{mounted(){this.lastValueSent=null;let e=()=>T(this.el.getAttribute("aria-expanded")),s=g(()=>{(this.lastValueSent!==this.el.value||!e())&&(this.lastValueSent=this.el.value,this.pushEventTo(this.el.dataset.myself,"search",this.el.value))},this.el.dataset.throttleTime);this.el.dataset.autofocus&&y(this.el);let n=()=>parseInt(this.el.dataset.selectedIndex),l=()=>{let t=document.getElementById(this.el.getAttribute("aria-controls"));return t!=null&&t.children?Array.from(t.children):[]},o=t=>{let a=parseInt(this.el.dataset.resultsCount);t=(t%a+a)%a,this.el.dataset.selectedIndex=t,l().forEach((i,r)=>{r===t?i.setAttribute("aria-selected",!0):i.removeAttribute("aria-selected")})},d=t=>{let a=n(),i=document.getElementById(this.el.dataset.inputId),r="",u="";if(a>-1){let m=l()[a];r=m.dataset.label,u=m.dataset.value}return t.preventDefault(),t.stopPropagation(),this.el.value=r,this.el.focus(),c(this.el),this.pushEventTo(this.el.dataset.myself,"pick",{label:r,value:u}),i.value=u,i.dispatchEvent(new Event("input",{bubbles:!0})),!1};this.el.addEventListener("keydown",t=>{switch(t.key){case"Tab":return e()?d(t):!0;case"Esc":case"Escape":return this.el.value!==""||!e()?(t.preventDefault(),t.stopPropagation(),this.el.value="",this.el.dataset.selectedIndex=-1,l().forEach((a,i)=>{a.removeAttribute("aria-selected")}),s(),!1):e()?(t.preventDefault(),t.stopPropagation(),this.el.value=this.el.dataset.savedLabel||"",c(this.el),this.pushEventTo(this.el.dataset.myself,"cancel"),this.lastValueSent=null,!1):!0;case"Enter":return e()?d(t):(this.el.value="",t.preventDefault(),t.stopPropagation(),s(),!1);case"Up":case"Down":case"ArrowUp":case"ArrowDown":if(e()){t.preventDefault(),t.stopPropagation();let a=n();return a=t.key==="ArrowUp"||t.key==="Up"?a-1:a+1,o(a),!1}else return!0;default:return!0}}),this.el.addEventListener("focus",t=>{c(this.el)}),this.el.addEventListener("input",t=>{switch(t.inputType){case"insertText":case"deleteContentBackward":case"deleteContentForward":return s(),!0;default:return!1}}),this.el.addEventListener("pick",t=>(o(t.detail.dispatcher.dataset.index),d(t)))}},PyroCopyToClipboard:{mounted(){this.content=this.el.innerHTML;let{value:e,message:s,ttl:n}=this.el.dataset;this.el.addEventListener("click",l=>{l.preventDefault(),navigator.clipboard.writeText(e),this.el.innerHTML=s||"Copied to clipboard!",this.timeout=window.setTimeout(()=>{this.el.innerHTML=this.content},n)})},updated(){window.clearTimeout(this.timeout)},destroyed(){window.clearTimeout(this.timeout)}}};function p(e){var o,d;let s=window.innerWidth,n=window.innerHeight,l=e.getBoundingClientRect();hOffset=((o=e.dataset)==null?void 0:o.horizontalOffset)||0,vOffset=((d=e.dataset)==null?void 0:d.verticalOffset)||0,l.right+24>s?(e.style.right=hOffset,e.style.left=null):(e.style.left=hOffset,e.style.right=null),l.bottom+24>n?(e.style.bottom=vOffset,e.style.top=null):(e.style.top=vOffset,e.style.bottom=null)}function v(e){var s,n;clearInterval(e.ttlInterval),((s=e.el.dataset)==null?void 0:s.ttl)>0&&(e.countdown=(n=e.el.dataset)==null?void 0:n.ttl,e.ttlInterval=setInterval(()=>{e.countdown=e.countdown-16.7,e.countdown<=0?window.liveSocket.execJS(e.el,e.el.getAttribute("data-hide-exec-js")):(el=document.querySelector(`#${e.el.id}>section>progress`),el?el.value=e.countdown:clearInterval(e.ttlInterval))},16.7))}function g(e,s){let n=!1;return function(){n||(e.apply(this,arguments),n=!0,setTimeout(function(){e.apply(this,arguments),n=!1},s))}}function c(e){typeof e.select=="function"&&e.select()}function y(e){e.focus(),c(e)}function T(e){return![null,void 0,!1,"false"].includes(e)}return M(A);})();
