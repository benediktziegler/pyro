var Phlegethon=(()=>{var d=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var p=(e,t)=>{for(var n in t)d(e,n,{get:t[n],enumerable:!0})},k=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of f(t))!v.call(e,o)&&o!==n&&d(e,o,{get:()=>t[o],enumerable:!(s=w(t,o))||s.enumerable});return e};var y=e=>k(d({},"__esModule",{value:!0}),e);var r=(e,t,n)=>new Promise((s,o)=>{var u=i=>{try{l(n.next(i))}catch(a){o(a)}},g=i=>{try{l(n.throw(i))}catch(a){o(a)}},l=i=>i.done?s(i.value):Promise.resolve(i.value).then(u,g);l((n=n.apply(e,t)).next())});var T={};p(T,{getTimezone:()=>m,hooks:()=>S,sendTimezoneToServer:()=>L});localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");window.addEventListener("phlegethon:theme-dark",e=>{localStorage.theme="dark",document.documentElement.classList.add("dark")});window.addEventListener("phlegethon:theme-light",e=>{localStorage.theme="light",document.documentElement.classList.remove("dark")});window.addEventListener("phlegethon:theme-system",e=>{localStorage.removeItem("theme"),window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),document.documentElement.classList.add("dark")});window.addEventListener("phlegethon:clear",e=>{var t;((t=e==null?void 0:e.target)==null?void 0:t.value)!=""&&(e.target.value="")});function m(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function L(){return r(this,null,function*(){let e=m(),t=document.querySelector("meta[name='csrf-token']").getAttribute("content");typeof window.localStorage!="undefined"&&(!localStorage.timezone||localStorage.timezone!=e)&&(yield fetch("/session/set-timezone",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json","x-csrf-token":t},referrerPolicy:"no-referrer",body:JSON.stringify({timezone:e})})).status===200&&(localStorage.timezone=e)})}var S={PhlegethonFlashComponent:{mounted(){this.oldMessageHTML=document.querySelector(`#${this.el.id}-message`).innerHTML,this.el.dataset.autoshow!==void 0&&window.liveSocket.execJS(this.el,this.el.getAttribute("data-show-exec-js")),h(this)},updated(){newMessageHTML=document.querySelector(`#${this.el.id}-message`).innerHTML,newMessageHTML!==this.oldMessageHTML?(this.oldEl=this.el,this.oldMessageHTML=newMessageHTML,h(this)):el.value=this.countdown},destroyed(){clearInterval(this.ttlInterval)}},PhlegethonNudgeIntoView:{mounted(){c(this.el)},updated(){c(this.el)}},PhlegethonAutocompleteComponent:{mounted(){this.el.addEventListener("keydown",e=>{switch(e.key){case"ArrowDown":this.pushEvent("select_item",{index:(this.el.selectedIndex+1)%this.el.options.length});break;case"ArrowUp":this.pushEvent("select_item",{index:(this.el.selectedIndex-1+this.el.options.length)%this.el.options.length});break;case"Enter":break;default:break}})}}};function c(e){let t=window.innerWidth,n=window.innerHeight,s=e.getBoundingClientRect();hOffset=e.dataset.horizontalOffset||0,vOffset=e.dataset.verticalOffset||0,s.right+24>t?(e.style.right=hOffset,e.style.left=null):(e.style.left=hOffset,e.style.right=null),s.bottom+24>n?(e.style.bottom=vOffset,e.style.top=null):(e.style.top=vOffset,e.style.bottom=null)}function h(e){clearInterval(e.ttlInterval),e.el.dataset.ttl>0&&(e.countdown=e.el.dataset.ttl,e.ttlInterval=setInterval(()=>{e.countdown=e.countdown-16.7,e.countdown<=0?window.liveSocket.execJS(e.el,e.el.getAttribute("data-hide-exec-js")):(el=document.querySelector(`#${e.el.id}>section>progress`),el?el.value=e.countdown:clearInterval(e.ttlInterval))},16.7))}return y(T);})();
